name: 'Dependency Review'
description: 'Check dependencies for vulnerabilities and licenses'
runs:
  using: 'composite'
  steps:
    - name: 'Checkout Repository'
      uses: actions/checkout%401e31de5234b9f8995739874a8ce0492dc87873e2 # v4.0.0
      with:
        fetch-depth: 2
    - name: Get HEAD~1 sha
      id: rev-parse
      shell: bash
      run: echo "sha=$(git rev-parse HEAD~1)" >> "$GITHUB_OUTPUT"
    - name: 'Dependency Review'
      uses: actions/dependency-review-action%409129d7d40b8c12c1ed0f60400d00c92d437adcce # v4
      with:
        fail-on-severity: high
        comment-summary-in-pr: on-failure
        # these are only used for event types other than pull_request and pull_request_target.
        base-ref: ${{ steps.rev-parse.outputs.sha }}
        head-ref: ${{ github.sha }}
        allow-licenses: 'MIT,Apache-2.0,MPL-2.0,ISC,BSD-2-Clause,BSD-3-Clause,Unlicense,CC0-1.0,CC-BY-3.0,WTFPL,0BSD,AFL-2.1'
        allow-dependencies-licenses: 'pkg:npm/%40exodus/exchange-monitors,pkg:npm/%40exodus/exchange-pair-generator,pkg:npm/%40exodus/fusion,pkg:npm/%40exodus/module,pkg:npm/%40exodus/networking-browser,pkg:npm/%40exodus/networking-common,pkg:npm/%40exodus/networking-mobile,pkg:npm/%40exodus/networking-node,pkg:npm/%40exodus/networking-spec,pkg:npm/%40exodus/safe-report,pkg:npm/%40exodus/wallet-compatibility-modes,pkg:npm/%40exodus/analytics-validation,pkg:npm/%40exodus/atom-tests,pkg:npm/%40exodus/atoms,pkg:npm/%40exodus/dayjs,pkg:npm/%40exodus/dependency-injection,pkg:npm/%40exodus/dependency-preprocessors,pkg:npm/%40exodus/eslint-plugin-ban-flow,pkg:npm/%40exodus/eslint-plugin-basic-utils,pkg:npm/%40exodus/eslint-plugin-hydra,pkg:npm/%40exodus/eslint-plugin-i18n,pkg:npm/%40exodus/eslint-plugin-package,pkg:npm/%40exodus/eslint-plugin-restricted-imports,pkg:npm/%40exodus/exchange-client-providers,pkg:npm/%40exodus/exodus-exchange-client,pkg:npm/%40exodus/exodus-pricing-client,pkg:npm/%40exodus/fiat-client,pkg:npm/%40exodus/fiat-currencies,pkg:npm/%40exodus/formatting,pkg:npm/%40exodus/fusion-atoms,pkg:npm/%40exodus/fusion-merge,pkg:npm/%40exodus/hw-common,pkg:npm/%40exodus/i18n,pkg:npm/%40exodus/i18n-swc,pkg:npm/%40exodus/key-identifier-provider,pkg:npm/%40exodus/key-ids,pkg:npm/%40exodus/keychain-atoms,pkg:npm/%40exodus/live-chat-utils,pkg:npm/%40exodus/logger,pkg:npm/%40exodus/lokalise,pkg:npm/%40exodus/mock-fetch,pkg:npm/%40exodus/multi-account-redux,pkg:npm/%40exodus/react-hooks,pkg:npm/%40exodus/redux-dependency-injection,pkg:npm/%40exodus/retry,pkg:npm/%40exodus/segment-metrics,pkg:npm/%40exodus/send-validation,pkg:npm/%40exodus/sentry-client,pkg:npm/%40exodus/transform-storage,pkg:npm/%40exodus/yarn-classic-downgrade,pkg:npm/%40exodus/ab-testing,pkg:npm/%40exodus/activity-txs,pkg:npm/%40exodus/address-book,pkg:npm/%40exodus/address-cache,pkg:npm/%40exodus/address-provider,pkg:npm/%40exodus/analytics,pkg:npm/%40exodus/announcements,pkg:npm/%40exodus/app-process-mobile,pkg:npm/%40exodus/apy-rates,pkg:npm/%40exodus/assets-feature,pkg:npm/%40exodus/auth-mobile,pkg:npm/%40exodus/available-assets,pkg:npm/%40exodus/balances,pkg:npm/%40exodus/beta-access,pkg:npm/%40exodus/blockchain-metadata,pkg:npm/%40exodus/call-detection,pkg:npm/%40exodus/connected-origins,pkg:npm/%40exodus/crypto-news-monitor,pkg:npm/%40exodus/device-id,pkg:npm/%40exodus/enabled-assets,pkg:npm/%40exodus/event-log,pkg:npm/%40exodus/exchange,pkg:npm/%40exodus/export-transactions,pkg:npm/%40exodus/favorite-assets,pkg:npm/%40exodus/feature-flags,pkg:npm/%40exodus/fee-data-monitors,pkg:npm/%40exodus/fiat-balances,pkg:npm/%40exodus/fiat-ramp,pkg:npm/%40exodus/fiat-rate-converter,pkg:npm/%40exodus/filesystem,pkg:npm/%40exodus/geolocation,pkg:npm/%40exodus/historical-balances,pkg:npm/%40exodus/historical-fiat-balances-chart,pkg:npm/%40exodus/hw-ledger,pkg:npm/%40exodus/kyc,pkg:npm/%40exodus/local-seed-backups,pkg:npm/%40exodus/locale,pkg:npm/%40exodus/market-history,pkg:npm/%40exodus/nfts,pkg:npm/%40exodus/optimistic-balances,pkg:npm/%40exodus/orders,pkg:npm/%40exodus/personal-notes,pkg:npm/%40exodus/post-restore-modal,pkg:npm/%40exodus/pricing,pkg:npm/%40exodus/profile,pkg:npm/%40exodus/public-key-provider,pkg:npm/%40exodus/public-key-store,pkg:npm/%40exodus/rates-monitor,pkg:npm/%40exodus/referrals,pkg:npm/%40exodus/remote-config,pkg:npm/%40exodus/restore-progress-tracker,pkg:npm/%40exodus/risk-metrics,pkg:npm/%40exodus/sanctions,pkg:npm/%40exodus/seedless,pkg:npm/%40exodus/startup-counter,pkg:npm/%40exodus/sync-time,pkg:npm/%40exodus/synced-balances,pkg:npm/%40exodus/top-movers-monitor,pkg:npm/%40exodus/trusted-unverified-tokens,pkg:npm/%40exodus/tx-acceleration,pkg:npm/%40exodus/tx-log-monitors,pkg:npm/%40exodus/tx-notifications,pkg:npm/%40exodus/tx-signer,pkg:npm/%40exodus/ui-config,pkg:npm/%40exodus/wallet,pkg:npm/%40exodus/wallet-accounts,pkg:npm/%40exodus/fetch-factory,pkg:npm/%40exodus/fusion-local,pkg:npm/%40exodus/keystore-mobile,pkg:npm/%40exodus/platform-info,pkg:npm/%40exodus/storage-encrypted,pkg:npm/%40exodus/storage-enhancers,pkg:npm/%40exodus/storage-icons-browser,pkg:npm/%40exodus/storage-icons-mobile,pkg:npm/%40exodus/storage-interface,pkg:npm/%40exodus/storage-level,pkg:npm/%40exodus/storage-memory,pkg:npm/%40exodus/storage-mobile,pkg:npm/%40exodus/storage-seco,pkg:npm/%40exodus/storage-seed,pkg:npm/%40exodus/storage-spec,pkg:npm/%40exodus/storage-unsafe-desktop,pkg:npm/%40exodus/argo,pkg:npm/%40exodus/headless'


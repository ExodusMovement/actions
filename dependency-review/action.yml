name: 'Dependency Review'
description: 'Check dependencies for vulnerabilities and licenses'
runs:
  using: 'composite'
  steps:
    - name: 'Checkout Repository'
      uses: actions/checkout@1e31de5234b9f8995739874a8ce0492dc87873e2 # v4.0.0
      with:
        fetch-depth: 2
    - name: Get HEAD~1 sha
      id: rev-parse
      shell: bash
      run: echo "sha=$(git rev-parse HEAD~1)" >> "$GITHUB_OUTPUT"
    - name: 'Dependency Review'
      uses: actions/dependency-review-action@9129d7d40b8c12c1ed0f60400d00c92d437adcce # v4
      with:
        fail-on-severity: high
        comment-summary-in-pr: on-failure
        # these are only used for event types other than pull_request and pull_request_target.
        base-ref: ${{ steps.rev-parse.outputs.sha }}
        head-ref: ${{ github.sha }}
        allow-licenses: 'MIT,Apache-2.0,MPL-2.0,ISC,BSD-2-Clause,BSD-3-Clause,Unlicense,CC0-1.0,CC-BY-3.0,WTFPL,0BSD,AFL-2.1'
        allow-dependencies-licenses: 'pkg:npm/@exodus/exchange-monitors,pkg:npm/@exodus/exchange-pair-generator,pkg:npm/@exodus/fusion,pkg:npm/@exodus/module,pkg:npm/@exodus/networking-browser,pkg:npm/@exodus/networking-common,pkg:npm/@exodus/networking-mobile,pkg:npm/@exodus/networking-node,pkg:npm/@exodus/networking-spec,pkg:npm/@exodus/safe-report,pkg:npm/@exodus/wallet-compatibility-modes,pkg:npm/@exodus/analytics-validation,pkg:npm/@exodus/atom-tests,pkg:npm/@exodus/atoms,pkg:npm/@exodus/dayjs,pkg:npm/@exodus/dependency-injection,pkg:npm/@exodus/dependency-preprocessors,pkg:npm/@exodus/eslint-plugin-ban-flow,pkg:npm/@exodus/eslint-plugin-basic-utils,pkg:npm/@exodus/eslint-plugin-hydra,pkg:npm/@exodus/eslint-plugin-i18n,pkg:npm/@exodus/eslint-plugin-package,pkg:npm/@exodus/eslint-plugin-restricted-imports,pkg:npm/@exodus/exchange-client-providers,pkg:npm/@exodus/exodus-exchange-client,pkg:npm/@exodus/exodus-pricing-client,pkg:npm/@exodus/fiat-client,pkg:npm/@exodus/fiat-currencies,pkg:npm/@exodus/formatting,pkg:npm/@exodus/fusion-atoms,pkg:npm/@exodus/fusion-merge,pkg:npm/@exodus/hw-common,pkg:npm/@exodus/i18n,pkg:npm/@exodus/i18n-swc,pkg:npm/@exodus/key-identifier-provider,pkg:npm/@exodus/key-ids,pkg:npm/@exodus/keychain-atoms,pkg:npm/@exodus/live-chat-utils,pkg:npm/@exodus/logger,pkg:npm/@exodus/lokalise,pkg:npm/@exodus/mock-fetch,pkg:npm/@exodus/multi-account-redux,pkg:npm/@exodus/react-hooks,pkg:npm/@exodus/redux-dependency-injection,pkg:npm/@exodus/retry,pkg:npm/@exodus/segment-metrics,pkg:npm/@exodus/send-validation,pkg:npm/@exodus/sentry-client,pkg:npm/@exodus/transform-storage,pkg:npm/@exodus/yarn-classic-downgrade,pkg:npm/@exodus/ab-testing,pkg:npm/@exodus/activity-txs,pkg:npm/@exodus/address-book,pkg:npm/@exodus/address-cache,pkg:npm/@exodus/address-provider,pkg:npm/@exodus/analytics,pkg:npm/@exodus/announcements,pkg:npm/@exodus/app-process-mobile,pkg:npm/@exodus/apy-rates,pkg:npm/@exodus/assets-feature,pkg:npm/@exodus/auth-mobile,pkg:npm/@exodus/available-assets,pkg:npm/@exodus/balances,pkg:npm/@exodus/beta-access,pkg:npm/@exodus/blockchain-metadata,pkg:npm/@exodus/call-detection,pkg:npm/@exodus/connected-origins,pkg:npm/@exodus/crypto-news-monitor,pkg:npm/@exodus/device-id,pkg:npm/@exodus/enabled-assets,pkg:npm/@exodus/event-log,pkg:npm/@exodus/exchange,pkg:npm/@exodus/export-transactions,pkg:npm/@exodus/favorite-assets,pkg:npm/@exodus/feature-flags,pkg:npm/@exodus/fee-data-monitors,pkg:npm/@exodus/fiat-balances,pkg:npm/@exodus/fiat-ramp,pkg:npm/@exodus/fiat-rate-converter,pkg:npm/@exodus/filesystem,pkg:npm/@exodus/geolocation,pkg:npm/@exodus/historical-balances,pkg:npm/@exodus/historical-fiat-balances-chart,pkg:npm/@exodus/hw-ledger,pkg:npm/@exodus/kyc,pkg:npm/@exodus/local-seed-backups,pkg:npm/@exodus/locale,pkg:npm/@exodus/market-history,pkg:npm/@exodus/nfts,pkg:npm/@exodus/optimistic-balances,pkg:npm/@exodus/orders,pkg:npm/@exodus/personal-notes,pkg:npm/@exodus/post-restore-modal,pkg:npm/@exodus/pricing,pkg:npm/@exodus/profile,pkg:npm/@exodus/public-key-provider,pkg:npm/@exodus/public-key-store,pkg:npm/@exodus/rates-monitor,pkg:npm/@exodus/referrals,pkg:npm/@exodus/remote-config,pkg:npm/@exodus/restore-progress-tracker,pkg:npm/@exodus/risk-metrics,pkg:npm/@exodus/sanctions,pkg:npm/@exodus/seedless,pkg:npm/@exodus/startup-counter,pkg:npm/@exodus/sync-time,pkg:npm/@exodus/synced-balances,pkg:npm/@exodus/top-movers-monitor,pkg:npm/@exodus/trusted-unverified-tokens,pkg:npm/@exodus/tx-acceleration,pkg:npm/@exodus/tx-log-monitors,pkg:npm/@exodus/tx-notifications,pkg:npm/@exodus/tx-signer,pkg:npm/@exodus/ui-config,pkg:npm/@exodus/wallet,pkg:npm/@exodus/wallet-accounts,pkg:npm/@exodus/fetch-factory,pkg:npm/@exodus/fusion-local,pkg:npm/@exodus/keystore-mobile,pkg:npm/@exodus/platform-info,pkg:npm/@exodus/storage-encrypted,pkg:npm/@exodus/storage-enhancers,pkg:npm/@exodus/storage-icons-browser,pkg:npm/@exodus/storage-icons-mobile,pkg:npm/@exodus/storage-interface,pkg:npm/@exodus/storage-level,pkg:npm/@exodus/storage-memory,pkg:npm/@exodus/storage-mobile,pkg:npm/@exodus/storage-seco,pkg:npm/@exodus/storage-seed,pkg:npm/@exodus/storage-spec,pkg:npm/@exodus/storage-unsafe-desktop,pkg:npm/@exodus/argo,pkg:npm/@exodus/headless'

